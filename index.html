<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>빛의 증언 기록소</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <canvas id="lightCanvas"></canvas>
  <audio id="audio" loop></audio>
  
  <div id="overlay">
    
    <div id="intro" class="screen active">
      <div class="content">
        <h1 class="title fade-in">빛의 증언 기록소</h1>
        <p class="subtitle fade-in delay-1">당신의 감정을 빛으로 변환합니다</p>
        
        <div class="rules fade-in delay-2">
          <h3>행동 지침서</h3>
          <ol>
            <li>빛 앞에서 거짓을 말하지 마십시오</li>
            <li>빛이 작아지면 즉시 화면을 터치하십시오</li>
            <li>비정상 팝업 발생 시 키워드를 입력하십시오</li>
            <li>빛이 3회 깜빡이면 시선을 거두십시오</li>
            <li>당신의 빛은 당신을 기억합니다</li>
          </ol>
        </div>
        
        <button class="start-btn fade-in delay-3" onclick="startExperience()">시작하기</button>
      </div>
    </div>
    
    <div id="stage1" class="screen">
      <div class="progress">●○○</div>
      <div class="metadata">첫 번째 증언</div>
      <h2 class="question">당신은 지금<br>어디에 있습니까?</h2>
      
      <div class="choices">
        <button class="choice" onclick="selectEmotion('calm')">
          <div class="choice-content">
            <div class="choice-text">집에 돌아온</div>
            <div class="choice-subtext">곳에서</div>
          </div>
        </button>
        
        <button class="choice" onclick="selectEmotion('hope')">
          <div class="choice-content">
            <div class="choice-text">새로 시작하는</div>
            <div class="choice-subtext">곳에서</div>
          </div>
        </button>
        
        <button class="choice" onclick="selectEmotion('joy')">
          <div class="choice-content">
            <div class="choice-text">빛이 가득한</div>
            <div class="choice-subtext">곳에서</div>
          </div>
        </button>
        
        <button class="choice" onclick="selectEmotion('excitement')">
          <div class="choice-content">
            <div class="choice-text">무언가 일어날</div>
            <div class="choice-subtext">곳에서</div>
          </div>
        </button>
      </div>
    </div>
    
    <div id="stage2" class="screen">
      <div class="progress">●●○</div>
      <div class="metadata">두 번째 증언</div>
      <h2 class="question">당신은 그곳에서<br>무엇을 하고 싶습니까?</h2>
      
      <div class="choices">
        <button class="choice" onclick="selectMovement('still')">
          <div class="choice-icon">●</div>
          <div class="choice-text">머물고 싶다</div>
        </button>
        
        <button class="choice" onclick="selectMovement('walk')">
          <div class="choice-icon">→</div>
          <div class="choice-text">천천히 걷고 싶다</div>
        </button>
        
        <button class="choice" onclick="selectMovement('play')">
          <div class="choice-icon">✦</div>
          <div class="choice-text">뛰어다니고 싶다</div>
        </button>
        
        <button class="choice" onclick="selectMovement('run')">
          <div class="choice-icon">⟫</div>
          <div class="choice-text">달려가고 싶다</div>
        </button>
      </div>
    </div>
    
    <div id="stage3" class="screen">
      <div class="progress">●●●</div>
      <div class="metadata">세 번째 증언</div>
      <h2 class="question">그 감정이<br>얼마나 강합니까?</h2>
      
      <div class="choices">
        <button class="choice" onclick="selectIntensity('whisper')">
          <div class="choice-text">속삭임처럼</div>
        </button>
        
        <button class="choice" onclick="selectIntensity('talk')">
          <div class="choice-text">대화처럼</div>
        </button>
        
        <button class="choice" onclick="selectIntensity('song')">
          <div class="choice-text">노래처럼</div>
        </button>
        
        <button class="choice" onclick="selectIntensity('shout')">
          <div class="choice-text">함성처럼</div>
        </button>
      </div>
    </div>
    
    <div id="generating" class="screen">
      <div class="content">
        <h2 class="generating-text">당신의 빛을 생성하고 있습니다</h2>
        <div class="loading-dots">
          <span>.</span><span>.</span><span>.</span>
        </div>
      </div>
    </div>
    
    <div id="result" class="screen">
      <div class="content">
        <div class="card">
          <canvas id="cardCanvas"></canvas>
          <div class="card-info">
            <h2 class="card-title">당신의 빛:</h2>
            <h1 class="card-emotion" id="emotionName">평온의 빛</h1>
            
            <div class="card-details">
              <p class="observation-data" id="observationData">관찰: 01.28 / 15:47 / -2°C</p>
              
              <div class="interview-quotes">
                <p class="quote" id="quote1">"편안해요"</p>
                <p class="quote" id="quote2">"오래 보고 싶어요"</p>
              </div>
              
              <p class="warning" id="warningText">⚠️ 이 빛은 당신을 기억합니다</p>
              
              <p class="card-id" id="cardId">#L-2847</p>
            </div>
          </div>
        </div>
        
        <div class="result-actions">
          <button class="btn-primary" onclick="saveCard()">QR로 저장</button>
          <button class="btn-secondary" onclick="restart()">다시 하기</button>
        </div>
      </div>
    </div>
    
    <div id="qr" class="screen">
      <div class="content">
        <h2>QR 코드로 저장하세요</h2>
        <div id="qrcode"></div>
        <button class="btn-secondary" onclick="closeQR()">닫기</button>
      </div>
    </div>
    
  </div>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="light.js"></script>
</body>
</html>
